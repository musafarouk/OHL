(function($,_){var Attributes=function(object){this.data=object&&_.isObject(object)&&_.clone(object)||{};};Attributes.prototype.toString=function(){var output='';var name,value;var checkPlain=function(str){return str&&str.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;')||'';};for(name in this.data){if(!this.data.hasOwnProperty(name))continue;value=this.data[name];if(_.isFunction(value))value=value();if(_.isObject(value))value=_.values(value);if(_.isArray(value))value=value.join(' ');output+=' '+ checkPlain(name)+'="'+ checkPlain(value)+'"';}
return output;};Attributes.prototype.addClass=function(value){var classes=this.getClasses();value=[].concat(classes,value);this.set('class',_.uniq(value));return this;};Attributes.prototype.exists=function(name){return this.data[name]!==void(0)&&this.data[name]!==null;};Attributes.prototype.get=function(name,defaultValue){if(!this.exists(name))this.data[name]=defaultValue;return this.data[name];};Attributes.prototype.getData=function(){return _.clone(this.data);};Attributes.prototype.getClasses=function(){var classes=[].concat(this.get('class',[]));return _.uniq(classes);};Attributes.prototype.hasClass=function(name){name=[].concat(name);var classes=this.getClasses();var found=false;_.each(name,function(value){if(_.indexOf(classes,value)!==-1)found=true;});return found;};Attributes.prototype.merge=function(values,recursive){values=values instanceof Attributes?values.getData():values;if(recursive===void(0)||recursive){this.data=$.extend(true,{},this.data,values);}
else{$.extend(this.data,values);}
return this;};Attributes.prototype.remove=function(name){if(this.exists(name))delete this.data[name];return this;};Attributes.prototype.removeClass=function(value){this.set('class',_.without(this.getClasses(),[].concat(value)));return this;};Attributes.prototype.replaceClass=function(oldValue,newValue){var classes=this.getClasses();var i=_.indexOf(oldValue,classes);if(i>=0){classes[i]=newValue;this.set('class',classes);}
return this;};Attributes.prototype.set=function(name,value){this.data[name]=value;return this;};window.Attributes=function(object){return object instanceof Attributes?object:new Attributes(object);};})(window.jQuery,window._);